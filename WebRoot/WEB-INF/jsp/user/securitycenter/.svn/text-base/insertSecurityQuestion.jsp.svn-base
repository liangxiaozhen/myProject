<%@ page language="java" contentType="text/html; charset=UTF-8"
	pageEncoding="UTF-8"%>
<form id="gj_security_question" data-custquestion="2">
	<div class="verification-box">
		<div class="verification-from">
			<div class="item clearfloat">
				<span class="verification-1"> 问题一: </span> <span
					class="verification-2"> <select name="question1"
					id="question1" class="select-question gj_choosen">
						<option value="0">--选择问题--</option>
						<option value="1">您母亲的生日是？</option>
						<option value="2">您母亲的姓名是？</option>
						<option value="3">您父亲的生日是？</option>
						<option value="4">您父亲的姓名是？</option>
						<option value="5">您孩子的生日是？</option>
						<option value="6">您孩子的姓名是？</option>
						<option value="7">您配偶的生日是？</option>
						<option value="8">您配偶的姓名是？</option>
						<option value="9">您的出生地是哪里？</option>
						<option value="10">您最喜欢什么颜色？</option>
						<option value="11">您是什么学历？</option>
						<option value="12">您的属相是什么的？</option>
						<option value="13">您小学就读的是哪所学校？</option>
						<option value="14">您最崇拜谁？</option>
						<option value="15">您打字经常用什么输入法？</option>
						<option value="16">您是什么时间参加工作的？</option>
				</select> <input type="text" class="input-text-2 gj_custom" id="gj_question1"
					name="question1" placeholder="请输入问题...">
				</span> <span class="verification-3" style="color: red;" id="question1Err"></span>
			</div>
			<div class="item clearfloat">
				<span class="verification-1"> <b class="red-star">*</b> 答案一:
				</span> <span class="verification-2"> <input type="text"
					class="input-text-2" id="answer1" name="answer1"
					placeholder="请输入答案...">
				</span> <span class="verification-3" style="color: red;" id="answer1Err"></span>
			</div>
			<div class="item clearfloat">
				<span class="verification-1"> 问题二: </span> <span
					class="verification-2"> <select name="question2"
					id="question2" class="select-question gj_choosen">
						<option value="">--选择问题--</option>
						<option value="1">您母亲的生日是？</option>
						<option value="2">您母亲的姓名是？</option>
						<option value="3">您父亲的生日是？</option>
						<option value="4">您父亲的姓名是？</option>
						<option value="5">您孩子的生日是？</option>
						<option value="6">您孩子的姓名是？</option>
						<option value="7">您配偶的生日是？</option>
						<option value="8">您配偶的姓名是？</option>
						<option value="9">您的出生地是哪里？</option>
						<option value="10">您最喜欢什么颜色？</option>
						<option value="11">您是什么学历？</option>
						<option value="12">您的属相是什么的？</option>
						<option value="13">您小学就读的是哪所学校？</option>
						<option value="14">您最崇拜谁？</option>
						<option value="15">您打字经常用什么输入法？</option>
						<option value="16">您是什么时间参加工作的？</option>
				</select> <input type="text" class="input-text-2 gj_custom" id="gj_question2"
					name="question2" placeholder="请输入问题...">
				</span> <span class="verification-3" style="color: red;" id="question2Err"></span>
			</div>
			<div class="item clearfloat">
				<span class="verification-1"> <b class="red-star">*</b> 答案二:
				</span> <span class="verification-2"> <input type="text"
					class="input-text-2" id="answer2" name="answer2"
					placeholder="请输入答案...">
				</span> <span class="verification-3" style="color: red;" id="answer2Err"></span>
			</div>
			<div class="item clearfloat">
				<span class="verification-1"> 问题三: </span> <span
					class="verification-2"> <select name="question3"
					id="question3" class="select-question gj_choosen">
						<option value="0">--选择问题--</option>
						<option value="1">您母亲的生日是？</option>
						<option value="2">您母亲的姓名是？</option>
						<option value="3">您父亲的生日是？</option>
						<option value="4">您父亲的姓名是？</option>
						<option value="5">您孩子的生日是？</option>
						<option value="6">您孩子的姓名是？</option>
						<option value="7">您配偶的生日是？</option>
						<option value="8">您配偶的姓名是？</option>
						<option value="9">您的出生地是哪里？</option>
						<option value="10">您最喜欢什么颜色？</option>
						<option value="11">您是什么学历？</option>
						<option value="12">您的属相是什么的？</option>
						<option value="13">您小学就读的是哪所学校？</option>
						<option value="14">您最崇拜谁？</option>
						<option value="15">您打字经常用什么输入法？</option>
						<option value="16">您是什么时间参加工作的？</option>
				</select> <input type="text" class="input-text-2 gj_custom" id="gj_question3"
					name="question3" placeholder="请输入问题...">
				</span> <span class="verification-3" style="color: red;" id="question3Err"></span>
			</div>
			<div class="item clearfloat">
				<span class="verification-1"> <b class="red-star">*</b> 答案三:
				</span> <span class="verification-2"> <input type="text"
					class="input-text-2" id="answer3" name="answer3"
					placeholder="请输入答案...">
				</span> <span class="verification-3" style="color: red;" id="answer3Err"></span>
			</div>
			<div class="item clearfloat">
				<span class="verification-1"> </span> <span class="verification-2">
					<a href="javascript:void(0)" class="submit gj_choosen"
					id="questionmark" onclick="gj_security_question(this)">确定</a> <a
					href="javascript:void(0)" class="submit gj_custom"
					onclick="gj_security_question(this)">确定</a> <a
					href="javascript:void(0)" class="submit custom"
					id="question1_custom">自定义问题</a> <a href="javascript:void(0)"
					class="submit choose gj_custom" id="question1_choose">选择问题</a>
				</span> <span class="verification-3" style="color: red;" id="submitErr">
				</span>
			</div>
		</div>
	</div>
</form>
<script type="text/javascript">
	$(function(){
		$(".gj_custom").hide();
		//判断选中的问题不能相同
			$(".select-question").on("change",function(){
				var question1 = $("#question1").val();
				var question2 = $("#question2").val();
				var question3 = $("#question3").val();
				var val = $(this).val();
				var id = $(this).attr("id");
				if(id=="question1"){
				if(val == question2 || val == question3 || question2 == question3){
						$("#"+id+"Err").text("选择的问题不能相同");
						$("#questionmark").removeAttr("onclick");
						return false;
					}else{
						$("#questionmark").attr("onclick","gj_security_question(this)");
 					$("#question1Err").text("");
						$("#question2Err").text("");
						$("#question3Err").text("");
					}
				}else if(id=="question2"){
					if(val == question1 || val == question3 || question1 == question3){
						$("#"+id+"Err").text("选择的问题不能相同");
						$("#questionmark").removeAttr("onclick");
						return false;
					}else{
						$("#questionmark").attr("onclick","gj_security_question(this)");
 					$("#question1Err").text("");
						$("#question2Err").text("");
						$("#question3Err").text("");
					}
				}else if(id=="question3"){
					if(val == question1 || val == question2 || question1 == question2){
						$("#"+id+"Err").text("选择的问题不能相同");
						$("#questionmark").removeAttr("onclick");
						return false;
					}else{
						$("#questionmark").attr("onclick","gj_security_question(this)");
					$("#question1Err").text("");
						$("#question2Err").text("");
						$("#question3Err").text("");
					}
				}
			});
		
			//安全问题 自定义问题选择框 1选择
 			$("#question1_custom").click(function(){
 				//更改缓存
  				$("#gj_security_question").data("custquestion",1);
  				//选择select问题框隐藏
 				 $(".gj_choosen").hide();
 				//自定义问题框显示
 				 $(".gj_custom").show();
 				//显示选择按钮
 				$("#question1_choose").show();
 				//隐藏自定义按钮
 				$("#question1_custom").hide();
 				//隱藏錯誤提示
 				$("#question1Err").hide();
				$("#question2Err").hide();
				$("#question3Err").hide();
   			}); 
 			
 			//选择问题选择框 1
 			$("#question1_choose").click(function(){
  				//更改缓存
 				$("#gj_security_question").data("custquestion",2);
   				//选择select问题框隐藏
 				 $(".gj_choosen").show();
 				//自定义问题框显示
 				 $(".gj_custom").hide();
 				//显示选择按钮
 				$("#question1_choose").hide();
 				//隐藏自定义按钮
 				$("#question1_custom").show();
 				//顯示錯誤提示
 				$("#question1Err").show();
				$("#question2Err").show();
				$("#question3Err").show();
  			});
 	});
	
	//安全问题设置
		function gj_security_question(obj){
			 //安全问题 设置类型
			 var custquestion = $("#gj_security_question").data("custquestion");
			 var answer1 = $("#answer1").val();
			 var answer2 = $("#answer2").val();
			 var answer3 = $("#answer3").val();
			 if(custquestion =="2"){
				var question1 = $("#question1").val();
				 var question2 = $("#question2").val();
				 var question3 = $("#question3").val();
				 //系统问题
				 if(question1 == 0){
					 $("#question1Err").text("请选择问题一...");
					 return false;
				 }else{
					 $("#question1Err").text("");
				 }
				if(isEmpty(answer1)){
					$("#answer1Err").text("请输入问题答案一...");
					$("#answer1").focus();
					 return false;
				 }else{
					 $("#answer1Err").text("");
				}
				if(question2 == 0){
					 $("#question2Err").text("请选择问题二...");
					 return false;
				 }else{
					 $("#question2Err").text("");
				 }
				if(isEmpty(answer2)){
					$("#answer2Err").text("请输入问题答案二...");
					$("#answer2").focus();
					 return false;
				 }else{
					 $("#answer2Err").text("");
				}
				if(question3 == 0){
					 $("#question3Err").text("请选择问题三...");
					 return false;
				 }else{
					 $("#question3Err").text("");
				 }
				if(isEmpty(answer3)){
					$("#answer3Err").text("请输入问题答案三...");
					$("#answer3").focus();
					 return false;
				 }else{
					 $("#answer3Err").text("");
				}
			 }else{
				 //自定义问题 
				var question1=$("#gj_question1").val();
				var question2=$("#gj_question2").val();
				var question3=$("#gj_question3").val();
     		if(isEmpty(question1)){
   				$("#question1Err").show();
					$("#question1Err").text("请输入问题一...");
					$("#gj_question1").focus();
					 return false;
				 }else{
					 $("#question1Err").show();
					 $("#question1Err").text("");
				}
   			if(isEmpty(answer1)){
 				$("#answer1Err").text("请输入问题答案一...");
 				$("#answer1").focus();
  				 return false;
 			 }else{
 				 $("#answer1Err").text("");
 			}
				if(isEmpty(question2)){
					$("#question2Err").show();
					$("#question2Err").text("请输入问题二...");
					$("#gj_question2").focus();
 					 return false;
				 }else{
					$("#question2Err").show();
					 $("#question2Err").text("");
				}
				if(isEmpty(answer2)){
					$("#answer1Err").text("请输入问题答案二...");
					$("#answer2").focus();
					 return false;
				 }else{
					 $("#answer1Err").text("");
				}
				if(isEmpty(question3)){
					$("#question3Err").show();
					$("#question3Err").text("请输入问题三...");
					$("#gj_question3").focus();
					 return false;
				 }else{
					$("#question3Err").show();
					 $("#question3Err").text("");
				}
				if(isEmpty(answer3)){
					$("#answer3Err").text("请输入问题答案三...");
					$("#answer3").focus();
					 return false;
				 }else{
					 $("#answer3Err").text("");
				}
				if(question1 == question2 || question1 == question3 || question2==question3){
	 				$("#submitErr").text("输入的密保问题不能一样..");
	 				return false;
	 			}else{
	 				$("#submitErr").text("");
	 			}
				if(question1.length > 30){
					$("#question1Err").text("您输入的问题超过30字数限制...");
					return false;
				 }else{
					$("#question1Err").text("");
				 }
				 if(question2.length > 30){
					$("#question2Err").text("您输入的问题超过30字数限制...");
					return false;
				 }else{
					$("#question2Err").text("");
				 }
				if(question3.length > 30){
					$("#question3Err").text("您输入的问题超过30字数限制...");
					return false;
				 }else{
					$("#question3Err").text("");
				 }
			 }
			if(answer1.length > 50){
				$("#answer1Err").text("您输入的问题答案超过50字数限制...");
				return false;
			 }else{
				$("#answer1Err").text("");
			 }
			 if(answer2.length > 50){
				$("#answer2Err").text("您输入的问题答案超过50字数限制...");
				return false;
			 }else{
				$("#answer2Err").text("");
			 }
			if(answer3.length > 50){
				$("#answer3Err").text("您输入的问题答案超过50字数限制...");
				return false;
			 }else{
				$("#answer3Err").text("");
			 }
  			 var Update_Security_Params ={"question1":question1,"question2":question2,"question3":question3,"answer1":answer1,"answer2":answer2,"answer3":answer3,"custquestion":custquestion};
			 Security.Update_Security(Update_Security_Params);  
		};
 </script>
